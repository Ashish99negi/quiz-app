<div class="config-page">
  <div class="bg-orb bg-orb-1"></div>
  <div class="bg-orb bg-orb-2"></div>
  <div class="bg-grid"></div>

  <nav class="navbar">
    <button class="back-btn" (click)="goBack()">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <path d="M19 12H5M12 5l-7 7 7 7"/>
      </svg>
      Back
    </button>
    <div class="nav-logo">
      <span class="logo-icon">‚ö°</span>
      <span class="logo-text">Quiz Maniac</span>
    </div>
    <div class="nav-spacer"></div>
  </nav>

  <div class="config-container">
    <div class="config-card">
      <div class="card-header">
        <h1 class="card-title">Configure Your Quiz</h1>
        <p class="card-subtitle">Customize your quiz experience below</p>
      </div>

      <div class="form-section">
        <label class="form-label">
          <span class="label-icon">üéØ</span>
          Quiz Topic
        </label>
        <div class="input-wrapper">
          <input
            class="topic-input"
            type="text"
            [(ngModel)]="quizConfig.topic"
            name="topic"
            placeholder="e.g., World History, JavaScript, Space..."
            autocomplete="off"
            [disabled]="isLoading"
          />
        </div>
      </div>

      <div class="form-section">
        <label class="form-label">
          <span class="label-icon">üìä</span>
          Difficulty Level
        </label>
        <div class="pill-group">
          @for (level of difficultyLevels; track level.value) {
            <button
              class="pill-btn"
              [class.active]="quizConfig.difficulty === level.value"
              [class.easy]="level.value === 'easy'"
              [class.medium]="level.value === 'medium'"
              [class.hard]="level.value === 'hard'"
              (click)="setDifficulty(level.value)"
              [disabled]="isLoading"
            >
              <span class="pill-icon">{{ level.icon }}</span>
              <span class="pill-label">{{ level.label }}</span>
              <span class="pill-desc">{{ level.desc }}</span>
            </button>
          }
        </div>
      </div>

      <div class="form-section">
        <label class="form-label">
          <span class="label-icon">üî¢</span>
          Number of Questions
        </label>
        <div class="number-group">
          @for (num of numberOfQuestionsOptions; track num) {
            <button
              class="number-btn"
              [class.active]="quizConfig.numberOfQuestions === num"
              (click)="setNumberOfQuestions(num)"
              [disabled]="isLoading"
            >
              {{ num }}
            </button>
          }
        </div>
      </div>

      <div class="form-section">
        <label class="form-label">
          <span class="label-icon">üéÆ</span>
          Quiz Mode
        </label>
        <div class="mode-grid">
          @for (mode of quizModes; track mode.value) {
            <button
              class="mode-card"
              [class.active]="quizConfig.mode === mode.value"
              (click)="onModeChange(mode.value)"
              [disabled]="isLoading"
            >
              <span class="mode-icon">{{ mode.icon }}</span>
              <span class="mode-label">{{ mode.label }}</span>
              <span class="mode-desc">{{ mode.desc }}</span>
              <span class="mode-check" [class.visible]="quizConfig.mode === mode.value">‚úì</span>
            </button>
          }
        </div>
      </div>

      @if (quizConfig.mode === 'timed') {
        <div class="form-section timed-settings animate-fade-in">
          <label class="form-label">
            <span class="label-icon">‚è±Ô∏è</span>
            Time Limit
          </label>
          <div class="number-group">
            @for (time of timeLimitOptions; track time) {
              <button
                class="number-btn"
                [class.active]="getTimeLimitMinutes() === time"
                (click)="setTimeLimit(time)"
                [disabled]="isLoading"
              >
                {{ time }}m
              </button>
            }
          </div>
        </div>
      }

      @if (errorMessage) {
        <div class="error-banner animate-fade-in">
          <span>‚ö†Ô∏è</span> {{ errorMessage }}
        </div>
      }

      <button
        class="generate-btn"
        (click)="generateQuiz()"
        [disabled]="isLoading || !quizConfig.topic.trim()"
      >
        @if (isLoading) {
          <div class="btn-loader">
            <div class="loader-dot"></div>
            <div class="loader-dot"></div>
            <div class="loader-dot"></div>
          </div>
          <span>Generating Questions...</span>
        } @else {
          <span>Generate Quiz</span>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        }
      </button>

      @if (isLoading) {
        <p class="loading-hint">AI is crafting your questions... ‚ú®</p>
      }
    </div>
  </div>
</div>
